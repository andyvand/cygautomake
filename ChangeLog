1999-10-02  Alexandre Oliva  <oliva@lsd.ic.unicamp.br>

	* automake.in (handle_dist): Set CDPATH before cd.
	* dejagnu.am (check-DEJAGNU): Likewise.
	* texinfos.am (install-info-am, dist-info): Likewise.
	* m4/init.m4 (AM_INIT_AUTOMAKE): Likewise.
	* m4/missing.m4 (AM_MISSING_HAS_RUN): Likewise.
	* aclocal.m4, configure, Makefile.in: Rebuilt.
	
	* AUTHORS: Added myself.

1999-09-14  Alexandre Oliva  <oliva@lsd.ic.unicamp.br>

	* m4/missing.m4: Support relative srcdir and ac_aux_dir.
	Reported by Tim Wilkinson <tim@transvirtual.com>
	* aclocal.m4, configure: Rebuilt.

1999-08-17  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* m4/lex.m4 (AM_PROG_LEX): Require AM_MISSING_HAS_RUN and, if no
	LEX program is found, use `${am_missing_run}flex'.

1999-08-16  Alexandre Oliva  <oliva@dcc.unicamp.br>
	
	* automake.in (handle_single_transform_list): Replace `$(OBJEXT)'
	with `o' in depfile.

	* automake.in (handle_lib_objects_cond): Remove second dot from
	dependency file names.

	* depend2.am (OBJEXT@EXT@.obj): Dependency file should be .Po,
	regardless of OBJEXT.

	* automake.in (handle_dependencies): Add blank line after depend2.
	(handle_dependencies): Start DEP_FILES with `@AMDEP@'.  Output
	blank line before `include's, not after them.
	(scan_one_configure_file): Do not special-case `DEP_' any more.

	* m4/depout.m4 (AM_OUTPUT_DEPENDENCY_COMMANDS): Run for loop only
	if AMDEP is empty.
	* aclocal.m4, configure: Rebuilt.

	* m4/depend.m4 (AMDEPBACKSLASH): Define.
	* depend2.am (@EXT@.o, @EXT@.lo, @EXT@.obj): Use AMDEPBACKSLASH.

	* automake.in (handle_dependencies): Generate `include's for
	dependency files after `@AMDEP@'.

	* m4/missing.m4: Use eval, instead of a sub-shell, to test for
	--run support in the missing script, since SHELL is not exported.
	Reported by job bogan <job@piquin.uchicago.edu>
	* aclocal.m4, configure: Rebuilt.

1999-08-15  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* aclocal.m4, configure: Rebuilt with itself.
	* Makefile.in, m4/Makefile.in, tests/Makefile.in: Likewise.

	* m4/missing.m4 (AM_MISSING_PROG): Remove DIRECTORY argument.
	Require AM_MISSING_HAS_RUN.  Use am_missing_run, defined by...
	(AM_MISSING_HAS_RUN): New macro.
	* m4/init.m4: Remove missing_dir from calls to AM_MISSING_PROG.
	* automake.texi (Requirements): Likewise.
	* version.texi, stamp-vti: Rebuilt.

1999-07-28  Tom Tromey  <tromey@cygnus.com>

	* depcomp: Handle the `hp' mode.

1999-07-06  Tom Tromey  <tromey@cygnus.com>

	* depcomp: Work around HP-UX 10.20 sed bug.

1999-07-05  Tom Tromey  <tromey@cygnus.com>

	* automake.in (handle_dependencies): Generate a separate include
	for each dep file.  Report from Alexandre Oliva.
	* depend.am: Don't include DEP_FILES.

1999-06-01  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* depend.am: Add @AMDEP@ before `include', so that dependency
	tracking can be disabled.
	* depend2.am: Ditto, before all lines related with dependency
	tracking.
	* m4/depend.m4 (AM_DEP_TRACK): New macro, that documents
	--enable/disable-dependency-tracking and sets AMDEP accordingly.
	It is implicitly disabled if depcomp is missing.
	(AM_DEPENDENCIES): Disable dependency tracking unless it can be
	generated by side-effect.
	* m4/init.m4 (AM_INIT_AUTOMAKE): Require AM_DEP_TRACK.
	* automake.in (handle_dependencies): Add @AMDEP@ before the value
	of DEP_FILES.
	* m4/depout.m4 (AM_OUTPUT_DEPENDENCY_COMMANDS): Handle DEP_FILES
	starting with `#'.

	* depcomp: Support -xM for dependency generation, for Sun CC.
	Reported by Alex Hornby <alex@anvil.co.uk>
	* m4/depend.m4: Extract the list of supported dependency-tracking
	mechanisms from the depcomp script and use it to test each one.
	* THANKS: Added Alex Hornby.

	* depend2.am: Move $(depcomp) to the line of $(...DEPMODE), so as
	to leave $(...COMPILE) in a line by itself.

	* THANKS: Added Miles Bader.

1999-06-01  Miles Bader  <miles@ccs.mt.nec.co.jp>

	* m4/depend.m4 (AM_DEPENDENCIES): Add check for `makedepend'.
	Fix `dashmstdout' to ignore non-dependency-generating uses of the
	-M flag.
	* depcomp (makedepend): New dependency-generating method.

1999-06-01  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* missing: If given `--run' as first argument, try to run the
	given program before falling back to the ``emulated'' behavior.
	Add support for `tar'.
	* automake.in: Use new `tar' support for `dist'.
	* m4/missing.m4 (AM_MISSING_PROG): Instead of checking for the
	program, prepend `missing --run' to the given program name.
	* m4/init.m4: Remove AMTAR-related stuff.
	* NEWS: Updated.

	* m4/depout.m4: Instead of `find'ing Makefiles, just iterate on
	CONFIG_FILES.  Do not use temporary variable for list of
	dependency files, it breaks Cygwin.

1999-04-27  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* depcomp (gcc): Imported comments removed from depend2.am, so
	that we don't lose them.

	* m4/depout.m4 (AM_OUTPUT_DEPENDENCY_COMMANDS): Avoid sed s/$U//
	when not using ansi2knr.

1999-04-26  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* m4/depend.m4 (AM_DEPENDENCIES): Test for depcc -E support.
	* depcomp (cpp): Extract dependencies from `# nnn "..."' lines.

1999-04-25  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* m4/depend.m4 (AM_DEPENDENCIES): Add a definition to conftest.h,
	so as not to compile an empty source; some compilers fail on this.
	Redirect stderr of depcc to /dev/null.  Test for -M with -o,
	because some compilers will output the rules to the output file.
	* depcomp (dashmstdout): Add --silent before --mode=compile, so
	that we don't get libtool output mixed up with make rules.

	* m4/init.m4 (AM_INIT_AUTOMAKE): Require AM_SET_DEPDIR.
	* depend2.am: Set tmpdepfile too, to speed up depcomp.  Always use 
	-o for libtool, otherwise it may try to deduce the object name
	from the dependency-generation flag.
	* depcomp: Assume depdir exists.  Preserve depfile on unsuccessful 
	compilations.

	* libtool.am: Do not emit .c.lo here...
	* depend2.am: ... emit .*.lo here, only when using libtool.
	* automake.in (get_object_extension): No more @MINUSO@ here.
	(handle_single_transform_list): Set $depfile from $object.
	(handle_dependencies): Emit depend2.am for all used languages,
	regardless of $use_dependencies; the setting of depcomp makes the
	difference.
	(lang_cxx_finish): Do not emit compilation rules.
	(lang_objc_finish): Likewise.
	(lang_java_finish): Likewise.

1999-04-21  Tom Tromey  <tromey@cygnus.com>

	* m4/depout.m4 (AM_OUTPUT_DEPENDENCY_COMMANDS): Correctly
	interpolate DEPDIR in DEP_FILES expansion.

1999-04-20  Lee Iverson  <leei@Canada.AI.SRI.COM>

	* m4/depend.m4 (AM_DEPENDENCIES): Fix up test for SGI-style
	dependency updating.
	* m4/depout.m4 (AM_OUTPUT_DEPENDENCY_COMMANDS): Fix sed script to
	handle multi-line dependency lists.

1999-04-12  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* Start of merge from trunk.

1999-04-11  Tom Tromey  <tromey@cygnus.com>

	* automake.in (handle_dist): Use AMTAR.
	(initialize_global_constants): Likewise.
	* m4/init.m4 (AM_INIT_AUTOMAKE): Use AMTAR, not TAR.

	* automake.in (lang_sub_obj): New function.
	(lang_cxx_rewrite): Use it.
	(lang_asm_rewrite): Likewise.
	(lang_objc_rewrite): Likewise.
	(lang_cxx_finish): Add `-o $@' to all C++ rules.
	(lang_asm_finish): Add `-o' to suffix rules when appropriate.
	(lang_objc_finish): Add `-o $@' to all ObjC rules.
	(lang_java_finish): Likewise.

	* automake.in: Only register `asm' once.
	(lang_asm_finish): Put assembly suffixes on @suffixes.

	* libtool.am (.s.lo): Removed.
	(.S.lo): Likewise.
	* automake.in (lang_asm_finish): Handle libtool.

	* libtool.am (.c.o): Always pass -c to libtool.

	* automake.in (lang_yacc_rewrite): Handle sources in subdirs.
	(lang_yaccxx_rewrite): Likewise.
	(lang_lex_rewrite): Likewise.
	(lang_lexxx_rewrite): Likewise.

	Assembly code no longer included by default:
	* compile.am (.s.o): Removed.
	(.S.o): Likewise.
	* automake.in: Register `asm' language.
	(lang_asm_finish): Generate suffix rules for assembly.
	(get_object_extension): Don't add `.s' or `.S' to suffix list.

	* automake.in (get_object_extension): Substitute @MINUSO@ when
	including compile.am.
	* compile.am (.c.o): Added @MINUSO@.
	(.c.obj): Likewise.

	First cut at allowing objects in subdirectories:
	* m4/Makefile.am (m4data_DATA): Added minuso.m4.
	* Makefile.am (dist_script_DATA): Added compile.
	* m4/minuso.m4: New file.
	* automake.in (initialize_global_constants): Added compile to
	common_files.
	(seen_cc_c_o): New global.
	(scan_one_configure_file): Set it when AM_PROG_CC_C_O seen.
	(handle_options): Recognize `subdir-objects' option.
	(lang_c_rewrite): Added directory argument.
	(lang_yacc_rewrite): Likewise.
	(lang_yaccxx_rewrite): Likewise.
	(lang_lex_rewrite): Likewise.
	(lang_lexxx_rewrite): Likewise.
	(handle_single_transform_list): Pass directory to _rewrite
	function.  Generate dependencies for dirstamp files for each .o;
	it is just the rules we want to create once.
	(lang_c_rewrite): Handle `subdir-objects' option.
	(lang_c_rewrite): Require `compile' program.
	* compile: New file.

	* automake.in (initialize_per_input): Initialize %directory_map.
	(handle_single_transform_list): Only create .dirstamp rules once
	per directory.

	* m4/gcj.m4 (AM_PROG_GCJ): Use AC_CHECK_PROGS, not AC_CHECK_PROG.

	Fix for confh.test:
	* automake.in (configure_input_files): New global.
	(scan_configure): Set it.
	(handle_configure): Use configure_input_files when determining
	which subdirs have a Makefile.am.  Fixes confh.test.
	(handle_configure): Only recognize acconfig.h in top srcdir.

1999-04-10  Tom Tromey  <tromey@cygnus.com>

	* depend2.am (%.o): Use `$(*D)/$(*F)', not just `$(*F)'.
	(%.lo): Likewise.

	* automake.in (am_install_var): Remove redundancies from the
	result.  Fixes test cond8.test.

	* automake.in (handle_single_transform_list): Handle dependency
	tracking when files are created in subdirs.  Error if object in
	subdir has `..' component.

	* automake.in (initialize_global_constants): Use $(TAR), not tar.

	* automake.in (handle_ltlibraries): Allow check_LTLIBRARIES.

	* automake.in (lang_yacc_finish): Added missing `&'.

1999-04-10  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* automake.in (handle_configure): Replace multiple occurrences of
	@STAMP@ in the same line; completes the patch for remake-hdr.am
	below.

	* automake.in (handle_dependencies): Fix test for `autodep'
	support.

	* automake.in (handle_source_transform): Add a pfx to used_pfx
	only if it's conditional or non-empty, to reduce the number of
	empty variables.  Emit _OBJECS variable based on program name if
	no SOURCES were explicitly specified.

	* remake-hdr.am: Create the stamp file before the header file,
	and just rename it after, so that the timestamps will be correct.
	Reported by Marc Horowitz <marc@mit.edu>

	* automake.in (lang_yacc_finish): Generate and dist a `.h' for a
	`.y' iff YFLAGS or AM_YFLAGS contain `-d'.
	Reported by Jim Meyering <meyering@ascend.com>

	* automake.in (lang_yacc_finish): $hname must not contain a `.'.

1999-04-10  Tom Tromey  <tromey@cygnus.com>

	* Makefile.am (EXTRA_DIST): New macro.
	* ChangeLog.1996, ChangeLog.1998: New files.

1999-04-09  Tom Tromey  <tromey@cygnus.com>

	* automake.in (handle_source_transform): Handle dist and nodist
	prefixes.
	(initialize_per_input): Initialize dist_sources.
	(check_libobjs_sources): Handle dist and nodist prefixes.
	(generate_makefile): Define DIST_SOURCES.
	* dist-vars.am (DISTFILES): Reference DIST_SOURCES, not SOURCES.

	* automake.texi (Macros): Mention AM_PROG_GCJ.
	(Java Support): New node.
	(Dist): Documented dist_ and nodist_ prefixes.

	* m4/gcj.m4 (AM_PROG_GCJ): Renamed from AC_PROG_GCJ.

	* automake.in (lang_java_finish): Generate .lo rule for `.java'
	files, not `.gcj' files.

	* m4/gcj.m4: New file.
	* m4/Makefile.am (m4data_DATA): Added gcj.m4.

	* automake.in: Register the `java' language.
	(resolve_linker): Handle GCJLINK.
	(lang_java_rewrite): New function.
	(LANG_IGNORE, LANG_PROCESS, LANG_SUBDIR): New constants.
	(lang_c_rewrite): Use new constants.
	(lang_cxx_rewrite): Likewise.
	(lang_header_rewrite): Likewise.
	(lang_yacc_rewrite): Likewise.
	(lang_yaccxx_rewrite): Likewise.
	(lang_lex_rewrite): Likewise.
	(lang_lexxx_rewrite): Likewise.
	(lang_asm_rewrite): Likewise.
	(lang_f77_rewrite): Likewise.
	(lang_ppf77_rewrite): Likewise.
	(lang_ratfor_rewrite): Likewise.
	(lang_objc_rewrite): Likewise.
	(handle_single_transform_list): Likewise.  Handle LANG_SUBDIR
	return from rewrite function.
	(lang_java_finish): New function.
	(register_language): Changed interface and all calls.  Added
	`autodep' settings to various languages.
	(handle_dependencies): Use `autodep' property of language when
	including dependency-tracking code.

1999-04-07  Tom Tromey  <tromey@cygnus.com>

	* automake.in (handle_texinfo): Indentation fixes.

1999-04-07  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* automake.in (value_to_list): Skip *only* trailing backslashes.

1999-04-07  Pavel Roskin  <pavel_roskin@geocities.com>

	* automake.in (value_to_list): Skip trailing backslashes.

1999-04-07  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* automake.in (handle_texinfo): Add texinfo.tex to config_aux_dir
	when appropriate.
	Reported by Per Cederqvist <ceder@lysator.liu.se>
	(handle_texinfo): Do not define texinfo_tex='.', use
	'$(srcdir)/texinfo.tex' instead; the directory name will be
	properly extracted.
	(require_conf_file_with_line): Fixed typo.

1999-04-03  Raja R Harinath  <harinath@cs.umn.edu>

	* automake.in (handle_tests): Test `dir=./' before `dir=', so that 
	we do not depend on PATH starting with `.'.

1999-03-31  Tom Tromey  <tromey@cygnus.com>

	* automake.in (quote_cond_val): Quote \n.
	(unquote_cond_val): Unquote \n.
	(read_am_file): If line ends with `\', preserve it and add a
	newline.
	(read_main_am_file): In conditional case, put conditional text at
	beginning of each generated line.

1999-03-31  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* automake.in (handle_tests): support XFAIL_TEST
	* automake.texi: document it

1999-04-12  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* End of merge from trunk.

1999-04-12  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* automake.in (cmdline_use_dependencies): Reintroduce it.
	(--ignore-deps): Set cmdline_use_dependencies again.
	(handle_dependencies): If use_dependencies is not set, define
	depcomp as empty.
	(handle_configure): Pass --ignore-deps to generated Makefile.ins.
	(scan_configure): Do not require depcomp when ignoring
	dependencies.
	(initialize_global_constants): Reintroduce --ignore-deps.

1999-04-10  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* depcomp: New file.
	* Makefile.am (dist_script_DATA): Added depcomp.
	* automake.in (cmdline_use_dependencies, omit_dependencies,
	dependency_macros): Removed.
	(--ignore-deps): Just ignore.
	(handle_single_transform_list, dep_files): Named dependency files
	as \$(DEPDIR)/$base.P$obj
	(handle_lib_objects_cond): Likewise.
	(generate_dependency_code): Do not check for AM_*_DEPENDENCIES.
	(scan_one_configure_file): Likewise.
	(handle_dependencies): Always enable auto-dep.  Define `depcomp'.
	Ignore OMIT_DEPENDENCIES.
	(handle_configure): Do not pass --ignore-deps.
	(scan_configure): Require `depcomp'.
	(initialize_global_constants): Make `depcomp' common.  Remove
	`--ignore-deps' from usage.
	(get_object_extension): No more NOTDEPEND in compile nor libtool.
	* compile.am: Remove rules for .c.o and .c.obj
	* depend.am (distclean-depend): Wipe out $(DEPDIR)
	* depend2.am (@FPFX@DEPMODE): Define from config.status.
	Use it and depcomp in suffix rules.
	* libtool.m4: Likewise.
	* m4/ccdepend.m4, m4/cxxdepend.m4: Removed.
	* m4/depvars.m4, m4/objcdepend.m4: Likewise.
	* m4/Makefile.am (dist_m4data_DATA): Likewise.
	* m4/depout.m4 (AM_OUTPUT_DEPENDENCY_COMMANDS): Extract DEPDIR
	from the Makefile and subst it in deps.  Report creation of deps
	files (for now).  Replace $U with `_' and the empty string.  Write 
	a comment to each created file. 
	* m4/depend.m4 (AM_SET_DEPDIR): Select a valid deps dir name.
	(AM_DEPENDENCIES): Accept CC, CXX and OBJC.  Just determine the
	dependency mode and AC_SUBST [$1]DEPMODE.
	* m4/init.m4 (AM_INIT_AUTOMAKE): Automatically call
	AM_DEPENDENCIES for CC and CXX, if the corresponding AC_PROG
	appears in configure.in, before or after AM_INIT_AUTOMAKE.

1999-04-02  Raja R Harinath  <harinath@cs.umn.edu>

	* depout.m4: Fix sed expression for extracting `dirpart'.

1999-03-29  Tom Tromey  <tromey@cygnus.com>

	* depend2.am (DEP_@FPFX@COMPILE): Use `!=' and not `-ne'.

	* compile.am (.c.obj): Also disabled when dependency tracking
	enabled.
	* depend2.am (@EXT@.obj): New target.
	* automake.in (get_object_extension): Added explanatory comment.
	(generate_dependency_code): Handle $seen_objext.

	* depend.am: Removed obsolete comment.
	* depend2.am: Minor formatting fix.

1999-03-28  Tom Tromey  <tromey@cygnus.com>

	* m4/Makefile.am (dist_m4data_DATA): Renamed, and added new
	files.
	(EXTRA_DIST): Removed.
	* automake.in (dependency_macros): New global.
	(scan_one_configure_file): Recognize new dependency tracking
	macros, and define new resulting configure variables.
	(generate_dependency_code): New sub.
	(handle_dependencies): Use it.
	* depend2.am (DEP_@FPFX@COMPILE): New macro.
	(@EXT@.o): Use it.
	(@EXT@.lo): Likewise.
	* m4/depvars.m4: New file.
	* m4/objcdepend.m4: New file.
	* m4/cxxdepend.m4: New file.
	* m4/init.m4: Moved dependency handling code into depout.m4.
	* m4/depout.m4: New file.
	* m4/ccdepend.m4: New file.
	* m4/depend.m4: New file.

	* depend2.am (@EXT@.o): Renamed to be old-style suffix pattern.
	(@EXT@.lo): Likewise.
	* m4/init.m4 (AM_INIT_AUTOMAKE): Don't create `.deps/.P'; it is no
	longer needed.

	* m4/init.m4 (AM_INIT_AUTOMAKE): Add code to config.status which
	will create the required .P files for dependency tracking.
	* automake.in (scan_dependency_file): Removed.
	(handle_dependencies): Never call scan_dependency_file.
	(generate_deps): Removed.
	(parse_arguments): Don't recognize --generate-deps, --build-dir,
	--srcdir-name, or --include-deps.  Do recognize --ignore-deps.
	(srcdir_name): Removed.
	(build_directory): Removed.
	(initialize_global_constants): Changed $USAGE to reflect argument
	parsing changes.
	(handle_dist_worker): Never run automake in `dist' rule.
	(handle_configure): Use --ignore-deps, not --include-deps.
	* depend.am (DEPS_MAGIC): Removed.
	(DEP_FILES): Unconditionally include.

1999-03-27  Tom Tromey  <tromey@cygnus.com>

	* automake.in (saw_sources_p): Correctly count header extensions
	seen.
	(handle_headers): Fixed order of arguments to am_install_var.

	* automake.in (am_install_var): Don't error if EXTRA_foo is
	defined uselessly.

	* scripts.am (install-@DIR@SCRIPTS): Use NDIR when appropriate.
	(uninstall-@DIR@SCRIPTS): Likewise.
	* progs.am (install-@DIR@PROGRAMS): Use NDIR when appropriate.
	(uninstall-@DIR@PROGRAMS): Likewise.
	* ltlib.am (install-@DIR@LTLIBRARIES): Use NDIR when appropriate.
	(uninstall-@DIR@LTLIBRARIES): Likewise.
	* lisp.am (install-@DIR@LISP): Use NDIR when appropriate.
	(uninstall-@DIR@LISP): Likewise.
	* libs.am (install-@DIR@LIBRARIES): Use NDIR when appropriate.
	(uninstall-@DIR@LIBRARIES): Likewise.
	* java.am (install-@DIR@JAVA): Use NDIR when appropriate.
	(uninstall-@DIR@JAVA): Likewise.
	* header.am (install-@DIR@HEADERS): Use NDIR when appropriate.
	(uninstall-@DIR@HEADERS): Likewise.
	* data.am (install-@DIR@DATA): Use NDIR when appropriate.
	(uninstall-@DIR@DATA): Likewise.
	* Makefile.in: Rebuilt.
	* Makefile.am (dist_pkgdata_DATA): Renamed.
	(EXTRA_DIST): Removed.
	(install-data-hook): Added POST_INSTALL; print commands as they
	are run; respect DESTDIR.
	* dist-vars.am (DISTFILES): Removed $(HEADERS).
	* automake.in (am_install_var): Accept `-candist' and
	`-defaultdist' options.  Handle `dist_' and `nodist_' prefixes.
	(am_primary_prefixes): Added can_dist argument.  Recognize `dist_'
	and `nodist_' prefixes.
	(handle_scripts): Pass -candist to am_install_var.
	(handle_data): Pass -defaultdist to am_install_var.
	(handle_headers): Likewise.
	(handle_emacs_lisp): Pass -candist to am_install_var.
	(handle_java): Pass -candist to am_install_var.

1999-03-26  Tom Tromey  <tromey@cygnus.com>

	* m4/init.m4: Fixed typo when invoking SHELL.

	* automake.in (lang_yacc_finish): Always use `.h' as suffix for
	yacc header file.  From Ralf Corsepius.

	* Makefile.in: Rebuilt.
	* Makefile.am: Updated to reflect removal of TAR subst.
	* automake.texi (Options): Document dist-bzip2.
	* automake.in (TAR): Removed global.
	(initialize_global_constants): Changed `dist' to use pipe with
	gzip; work with non-GNU tar.
	(handle_dist): Handle non-GNU tar.  Don't define TAR.
	(initialize_global_constants): Added `dist-bzip2' entry.
	(handle_options): Recognize dist-bzip2 option.
	(handle_dist): Likewise.
	* configure: Rebuilt.
	* configure.in: Don't check for tar.
	* m4/init.m4 (AM_INIT_AUTOMAKE): Check for `tar'.  Substitute
	AMTARFLAGS.

	* automake.in (am_install_var): Removed obsolete comment.

	* texinfos.am (uninstall-info): Don't print loop but instead print
	commands.  Simplified pre-uninstall loop.
	* scripts.am (uninstall-@DIR@SCRIPTS): Don't print loop but
	instead print commands.
	* progs.am (uninstall-@DIR@PROGRAMS): Don't print loop but instead
	print commands.
	* ltlib.am (uninstall-@DIR@LTLIBRARIES): Don't print loop but
	instead print commands.
	* lisp.am (install-@DIR@LISP): Strip subdir from file name.
	(uninstall-@DIR@LISP): Likewise.  Also, don't print loop but
	instead print commands.
	* libs.am (uninstall-@DIR@LIBRARIES): Don't print loop but instead
	print commands.
	* java.am (uninstall-@DIR@JAVA): Don't print loop but instead
	print commands.
	* header.am (install-@DIR@HEADERS): Strip subdir from file name.
	(uninstall-@DIR@HEADERS): Likewise.  Also, don't print loop but
	instead print commands.
	* data.am (install-@DIR@DATA): Strip subdir from file name.
	(uninstall-@DIR@DATA): Likewise.  Also, don't print loop but
	instead print commands.

	* automake.in (handle_merge_targets): `install-strip' is a phony
	target.  From Michel de Ruiter.

1999-03-25  Tom Tromey  <tromey@cygnus.com>

	* automake.in (define_compiler_variable): Don't define variable
	with trailing `_'.

1999-03-25  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* automake.in (LDADD): accept -dlopen and -dlpreopen here
	* automake.texi: ditto

1999-03-25  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* automake.in (TESTS): make from Solaris 7/x86 loses if srcdir
	is absolute and != objdir.  dir="" or "$(srcdir)/" fixes it

1999-03-24  Tom Tromey  <tromey@cygnus.com>

	* automake.in (define_compiler_variable): New sub.
	(finish_languages): Use it.
	(lang_cxx_finish): Likewise.
	(lang_f77_finish): Likewise.
	(lang_ppf77_finish): Likewise.
	(lang_ratfor_finish): Likewise.
	(lang_objc_finish): Likewise.

1999-03-23  Tom Tromey  <tromey@cygnus.com>

	* progs.am (install-@DIR@PROGRAMS): Use `-e' instead of multiple
	sed invocations.  From Elrond.
	(uninstall-@DIR@PROGRAMS): Likewise.

	* automake.in (lang_lex_finish): Rewrite `l', not `y', to `c'.
	From Ralf Corsepius.

1999-02-01  Thomas Tanner  <tanner@gmx.de>

	* automake.in: accept both A(C|M)_PROG_LIBTOOL, print a
	warning when AM_PROG_LIBTOOL was found
	* automake.texi: renamed AM_PROG_LIBTOOL to AC_PROG_LIBTOOL

1999-03-22  Tom Tromey  <tromey@cygnus.com>

	Made `+=' more robust.  Fixes pluseq6.test and pluseq7.test.
	* automake.in (define_standard_variables): New sub.
	(read_main_am_file): Use two passes to scan standard variables.
	(read_am_file): Don't special-case configure variables with `+='.
	(initialize_per_input): Initialize %var_was_plus_eq.
	(read_am_file): Set var_was_plus_eq element correctly.
	(define_variable): Give error if variable assigned with `+=' is
	internally defined.
	(initialize_per_input): Initialize %am_var_defs.
	(file_contents_with_transform): Set element in %am_var_defs.
	(read_am_file): Use %am_var_defs.

1999-03-21  Tom Tromey  <tromey@cygnus.com>

	* automake.in (initialize_per_input): Initialize %object_map.
	(handle_single_transform_list): Allow source files in
	subdirectories.

1999-03-21  Jim Meyering  <meyering@na-net.ornl.gov>

	* automake.in (handle_dist): Add missing newline after the first
	semicolon.

1999-03-11  Tom Tromey  <tromey@cygnus.com>

	* m4/error.m4, m4/mktime.m4, m4/obstack.m4, m4/regex.m4,
	m4/strtod.m4: Use $ac_objext, not `.o'.  From Jim Meyering.

	From Jim Meyering:
	* automake.in (handle_dist): Add `;\' to end of distcheck-hook
	line.
	(scan_one_configure_file): In LIBOBJS, recognize `$ac_objext' as
	legitimate ending.  Fixes libobj9.test.

	From Ralf Corsepius.  Fixes lex3.test.
	* automake.in (lang_yacc_finish): Include `.' in name pushed onto
	maintainer-clean list.
	(lang_lex_finish): Likewise.

1999-03-02  Tom Tromey  <tromey@cygnus.com>

	* subdirs.am (maintainer-clean-recursive): Changed "&&" into "if"
	construct to work around FreeBSD make/sh problem.  From Rich Wales.

1999-03-01  Tom Tromey  <tromey@cygnus.com>

	Fixes from Pavel Roskin:
	* automake.in (variable_conditions_sub): Sort list passed to
	variable_conditions_permutations.
	(variable_conditions): Sort list before returning.

1999-02-27  Tom Tromey  <tromey@cygnus.com>

	* automake.in (lang_extensions): New sub.
	(handle_dependencies): Use it.
	(cxx_extensions): Removed.
	(lang_cxx_finish): Use lang_extensions.
	(f77_extensions): Removed.
	(lang_f77_finish): Use lang_extensions.
	(objc_extensions): Removed.
	(lang_ppf77_finish): Put `.' before extension.  Fixes ext.test.
	Report from Dave Morrison.
	(lang_ratfor_finish): Likewise.

1999-02-26  Tom Tromey  <tromey@cygnus.com>

	* automake.in (finish_languages): Added AM_LDFLAGS.
	(lang_cxx_finish): Likewise.
	(lang_f77_finish): Likewise.
	(lang_ppf77_finish): Likewise.
	(lang_ratfor_finish): Likewise.
	(lang_objc_finish): Likewise.

1999-02-11  Tom Tromey  <tromey@cygnus.com>

	* aclocal.in (obsolete_macros): Copied from automake.in.
	(obsolete_rx): Use only keys of obsolete_macros.
	(scan_configure): Report replacement macro for an obsolete macro.
	* automake.in (obsolete_macros): Added ud_GNU_GETTEXT.

	* automake.in (obsolete_macros): Corrected typo in AM_EXEEXT
	entry.  Fixes obsolete2.test.

	* automake.in (obsolete_macros): Use empty string to indicate no
	substitution.
	(scan_one_configure_file): Likewise.

1999-02-07  Paul Eggert  <eggert@twinsun.com>

	* m4/ccstdc.m4 (AM_PROG_CC_STDC): Prefer -Ae to -Aa
	-D_HPUX_SOURCE, since -Ae allows `long long' and this is
	needed by some programs.

1999-02-10  Tom Tromey  <tromey@cygnus.com>

	* automake.in (handle_texinfo): Added `pgs' to list of
	extensions.  From NISHIDA Keisuke.

1999-02-04  Akim Demaille  <demaille@inf.enst.fr>

	* automake.in (handle_texinfo): remove texinfo.tex from
 	TEXINFODIR.

1999-02-02  Tom Tromey  <tromey@cygnus.com>

	* automake.in (handle_merge_targets): Use INSTALL_STRIP_FLAG.
	* progs.am (install-@DIR@PROGRAMS): Added INSTALL_STRIP_FLAG.
	* header-vars.am (INSTALL_PROGRAM): Removed
	AM_INSTALL_PROGRAM_FLAGS.
	(INSTALL_STRIP_FLAG): New macro.

	* automake.in: Handle `ypp' as C++ yacc source and `lpp' as C++
	lex source.
	(lang_yacc_finish): Likewise.
	(lang_lex_finish): Likewise.

1999-02-01  Tom Tromey  <tromey@cygnus.com>

	* automake.in (handle_dist_worker): Correctly find find in $$d,
	not $$.  From Bill Davidson.

	* automake.in (finish_languages): Use "&", not "do".  From Pavel
	Roskin.
	(handle_single_transform_list): Likewise.

1999-01-29  Tom Tromey  <tromey@cygnus.com>

	* automake.in (handle_configure): Removed unused variable.  From
	Pavel Roskin.

	* ansi2knr.c: New version from L. Peter Deutsch.

1999-01-22  Tom Tromey  <tromey@cygnus.com>

	* automake.in (require_file_internal): Correctly examine return
	value of `system'.  From Andris Pavenis.  Fixes copy.test.

	* m4/init.m4 (AM_INIT_AUTOMAKE): Require autoconf 2.13.

	* automake.in (lang_ppf77_rewrite): New function.  From Jochen
	Kuepper.  Fixes ppf77.test.
	(lang_ratfor_rewrite): New function

	* automake.in (handle_configure): Use `&' before sub calls (Perl 4
	fix).  From Erez Zadok.

1999-01-15  Tom Tromey  <tromey@cygnus.com>

	* configure.in: Version 1.4a (oops).

	* configure.in: Updated version to 1.5a.

1999-01-14  Tom Tromey  <tromey@cygnus.com>

	* automake.in (handle_configure): Compute $header_dir based on
	$one_name, not $one_hdr.  Reported by Erez Zadok.  Fixes
	confh2.test.
	(handle_configure): Compute relative path to input header
	correctly in all cases.

	* automake.in (handle_tests): Avoid error messages from dejagnu
	test rules.  From Karl Heuer.

	* automake.in (handle_texinfo): Add `/' to end of $conf_dir.

	* Makefile.am (AUTOMAKE_OPTIONS): Added `1.4'.

	* texi-vers.am ($(srcdir)/stamp-@VTI@): Find @TEXI@ in srcdir.
	From Alexandre Oliva and Erez Zadok.

	* automake.in (create): Renamed from touch.
	(handle_configure): Use create, not touch.

	* config.sub, config.guess: New versions from autoconf.

	* mkinstalldirs: New version from autoconf.

1999-01-12  Tom Tromey  <tromey@cygnus.com>

	* config.sub, config.guess, COPYING, texinfo.tex: New versions
	from FSF.

1999-01-11  Marcus G. Daniels  <mgd@chama.santafe.edu>

	* automake.in (PATH_PATTERN): New variable:
	(INCLUDE_PATTERN): Use it.  Ignore all include commands using 
	symbols besides $(top_srcdir) and $(srcdir).

1999-01-11  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* automake.in (handle_dist_worker): avoid failure in `make dist'
	if last file is a builddir-only file

1999-01-11  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* missing (autoheader): `s' was missing from sed script; grr

1999-01-11  Tom Tromey  <tromey@cygnus.com>

	* remake-hdr.am (@STAMP@): Reverted timestamp change.
	($(srcdir)/@STAMP@.in): Likewise.

1999-01-10  Tom Tromey  <tromey@cygnus.com>

	* Makefile.am (scriptdir): New macro.
	(script_DATA): Likewise.
	(install-data-hook): Use them.
	(EXTRA_DIST): Added script_DATA.
	(installcheck-local): Use script_DATA.

	* Makefile.am (pkgdata_DATA): Removed duplicate definition.

1999-01-10  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* missing (autoheader): accept multiple header files
	(automake): simplify sed processing

1999-01-10  Alexandre Oliva  <oliva@dcc.unicamp.br>

	* automake.in (handle_configure, stamp_dir): create only one stamp
	file per header, instead of one in the top-level directory and one
	in the directory that contains the header.

1999-01-10  Tom Tromey  <tromey@cygnus.com>

	* automake.in (lang_objc_finish): Formatting fix.

	* automake.in (objc_extensions): New sub.
	(handle_dependencies): Only generate dependency-tracking code for
	ObjC when ObjC source seen.

